<!DOCTYPE html>
<html lang="en">

<head>
    <title></title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://loupmon.com/style.css">
    <link rel="stylesheet" href="https://loupmon.com/color/blue.css">

    <link rel="stylesheet" href="https://loupmon.com/font-hack-subset.css">

    </head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://loupmon.com" style="text-decoration: none;">
                    <div class="logo">
                      
                            ~vincent_loupmon
                        
                    </div>
                </a>
            </div>
        </div>

        
        
        
    </header>
    

    <div class="content">
        
        <div class="posts">
                <div class="post on-list">
                    
    <h1 class="post-title"><a href="https://loupmon.com/test/"></a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date"></span>

    </div>

    

                    
        <div class="post-content">
            <h1 id="docker-environment-variables">Docker environment variables</h1>
<p>Here's a sample example of what environment variables in a <code>.env</code> file could look like :</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">BACKUP_PATH</span><span>=</span><span style="color:#a3be8c;">/home/vincent/ethereum2/backup
</span><span style="color:#bf616a;">IMPORT_PATH</span><span>=</span><span style="color:#a3be8c;">/home/vincent/ethereum2/import
</span><span style="color:#bf616a;">CONF_PATH</span><span>=</span><span style="color:#a3be8c;">/home/vincent/ethereum2/conf
</span><span style="color:#bf616a;">DOCKER_VOL_PATH</span><span>=</span><span style="color:#a3be8c;">/mnt/disks/docker
</span><span style="color:#bf616a;">PUBLIC_IP</span><span>=</span><span style="color:#a3be8c;">34.79.131.148
</span><span style="color:#bf616a;">GETH_FALLBACK_PROVIDER</span><span>=</span><span style="color:#a3be8c;">https://goerli.infura.io/v3/f03d676810c84b5e8e7fbd107790104f
</span></code></pre>
<p><code>BACKUP_PATH</code> is where data from the validator is exported. It must have <code>0700</code> permissions.
<code>IMPORT_PATH</code> is where data to import into a validator is stored. The tree is as such :
&gt;/
&gt;/keys/ <code>contains .json key files</code>
&gt;/account_password <code>contains the password used for the account keys</code>
&gt;/wallet_password	<code>contains the password used for the wallet</code></p>
<p><code>CONF_PATH</code> is where the configuration files for the metrics tools (prometheus, grafana) are stored
<code>DOCKER_VOL_PATH</code> is the path of the volume to be used by Docker
<code>PUBLIC_IP</code> is the WAN-visible IP of the container/VM, it is used for P2P in the Eth2 beacon
<code>GETH_FALLBACK_PROVIDER</code> is a third-party GEth endpoint to be used as fallback</p>
<h1 id="geth">Geth</h1>
<p>Just run <code>docker-compose up -d geth</code>.</p>
<h1 id="beacon">Beacon</h1>
<p>Just run <code>docker-compose up -d beacon</code>. Beacon depends on geth, so you could just run beacon if you want to deploy both at once.</p>
<h1 id="validator">Validator</h1>
<p>Run with <code>docker-compose up -d validator</code>.</p>
<h2 id="export-accounts">Export accounts</h2>
<p>Currently, export can't be fully automatized and you must go through the Prysm CLI,
but it's stlightly simplified here.</p>
<p>To export the accounts, use this command. You'll be prompted to enter the wallet password and asked to select the specific accounts you want to export.
<code>docker-compose run validator-export-accounts</code></p>
<p>To export the slasher history, use :
<code>docker-compose run validator-export-slasher-history</code></p>
<p>You can do <strong>both at the same time</strong> with <code>docker-compose run validator-export</code></p>
<p>Accounts will be backed up in a <code>backup.zip</code> file, the slasher-history is backed up to a .json file.</p>
<h2 id="import-accounts">Import accounts</h2>
<p>Just put the necessary files in the IMPORT_PATH as defined above, follow the tree structure and run <code>docker-compose run validator-import</code>.</p>
<h2 id="list-accounts">List accounts</h2>
<p><code>docker-compose validator-list-accounts</code></p>
<h2 id="delete-accounts">Delete accounts</h2>
<p><code>docker-compose run validator-delete-accounts</code> and select accounts by hand</p>

        </div>

                </div>
            <div class="pagination">
                <div class="pagination__buttons"></div>
            </div>
        </div>
        
    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright copyright--user">Vincent Loupmon&nbsp;<b>2022</b></div>
            </div>
    </footer>
    

</div>
</body>

</html>
